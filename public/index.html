<!DOCTYPE html>
<html>
  <head>
    <title>CQ</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="login.css" media="screen">
  </head>
 <body onload="initPage()">
<header style="width: 100%;height:60px;text-align:left" class="allSides">
      <p style="font-size: 30px;padding: 10px;font-weight: bold;">cq</p>
</header>

<center>
<div class="container" style="margin-top: 8%">
    <div  class="responsive-login-form allSides" style="height: 340px;background-color: #fff;">
      <p style="padding: 1%;font-size: 34px;">Log Into Your Account</p>

        <form action="/log" method="post">
          <div class="form-group" style="margin: 10px">
              <input type="text" required="" name="username" id="username" class="form-control" placeholder="Username"><br/>
          </div>
          <div class="form-group" style="margin: 10px">

              <input type="password" required="" name="password" id="password" class="form-control" placeholder="Password" ><br/>
          </div>
          <div class="form-group" style="margin: 10px">
              <input type="submit" value="Login" class="btn btn-success" id="logbtn">
          </div>
                 <a class = "submit" href="/auth/github" id="githubbtn"><i class="fab fa-github" style="size:5px;"></i>GITHUB LOGIN</a>


        </form>
  </div>
</div>
</center>

<div class="background"></div>

<footer class="footer allSides" style="position:fixed">
<center><p id="copyright" style="font-size:20px;font-weight:bold;color:#7f7f84"></p>
</center>
</footer>

<script>

function initPage() {
    var date = new Date();
    var currentyear = date.getFullYear();
    document.getElementById("copyright").innerHTML = "cq &copy; "+currentyear;
}

</script>
<script>
var username = document.getElementById("username");
var password = document.getElementById("password");
var log = document.getElementById("logbtn");

log.addEventListener("click", function() {
  if (username.value != "" && password.value != "") {
    var request = new XMLHttpRequest();
    request.addEventListener("load", function() {
      var data = JSON.parse(request.responseText);
      console.log(data);
      if (data.length > 0) {
        alert("sucessful");
      } else {
        alert("wrong username or password");
        password.value = "";
      }
    });
    request.open("POST", "/log");
    request.setRequestHeader("Content-Type", "application/json");
    request.send(
      JSON.stringify({ username: username.value, password: password.value })
    );
  } else {
    alert("All fields are required");
  }
});
</script>
  </body>
  <!--<script src="login.js" type="text/javascript"></script>-->
</html>
